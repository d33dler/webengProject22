(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{194:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(65),r=n.n(a),i=n(7),s=n(11),l=n(12),o=n(20),d=n(19),u=n(2),j=(n(74),n(75),n(3)),b=n(6),p=n.n(b),h=n(66),m=n.n(h).a.create({baseURL:"http://localhost:6868/nrp/",headers:{Accept:"application/json","Content-type":"application/json","Access-Control-Allow-Origin":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_BASE_URL}}),O=new(function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"getById",value:function(e){return m.get("articles/id/".concat(e))}},{key:"getByParam",value:function(e,t){return m.get("articles/".concat(e),{params:{value:t}})}},{key:"filterSearch",value:function(e){return m.get("articles/search/filter",{params:e})}},{key:"filterDelete",value:function(e){return console.log(e),m.delete("articles/search/filter",{params:e})}},{key:"filterUpdate",value:function(e){return m.patch("articles/search/filter",e.fields,{params:e.conditions})}},{key:"create",value:function(e){return m.post("articles/new",e)}},{key:"updateById",value:function(e,t){return m.put("articles/id/".concat(e),t)}},{key:"deleteById",value:function(e){return m.delete("articles/id/".concat(e))}},{key:"deleteByLocation",value:function(e,t){return m.delete("articles/location",{params:{lat:"".concat(e),long:"".concat(t)}})}},{key:"deleteAll",value:function(){return m.delete("articles")}},{key:"findByParameter",value:function(e){return m.get("articles/top-list/",{params:p.a.pick(e,(function(e,t){return!!e}))})}},{key:"findByRent",value:function(e,t,n){return m.get("articles/search-budget",{params:{min:"".concat(e),max:"".concat(t),format:"".concat(n)}})}},{key:"findByLocation",value:function(e,t,n){return m.get("articles/location?",{params:{lat:"".concat(e),long:"".concat(t),format:"".concat(n)}})}},{key:"getStatistics",value:function(e,t){return m.get("articles/statistics/".concat(e),{params:t})}}]),e}()),f=[{name:"Address",id:"address",type:"text"},{name:"Postal Code",id:"postalCode",type:"text"},{name:"City",id:"city",type:"text"},{name:"Area (m2)",id:"areaSqm",type:"text"},{name:"Rent",id:"rent",type:"text"},{name:"Deposit",id:"deposit",type:"text"},{name:"Latitude",id:"latitude",type:"text"},{name:"Longitude",id:"longitude",type:"text"},{name:"Room active",id:"isRoomActive",type:"checkbox",options:["Yes","No"],values:[!0,!1]}],x=n(0),v=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).generateLabel=function(e,t,n,c){return Object(x.jsx)("div",{className:e,children:Object(x.jsx)("label",{style:{color:n,fontWeight:c},htmlFor:t,children:"".concat(t)})})},c.generateDisplay=function(){return Object(x.jsx)("div",{className:"display-entry",children:Object(x.jsx)("ul",{children:Object.entries(c.props.data).map((function(e){var t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(x.jsxs)("li",{children:[c.generateLabel("field",n+" :","blue","bold"),c.generateLabel("value",a,"green","normal")]},n)}))})})},c}return Object(l.a)(n,[{key:"render",value:function(){return this.generateDisplay()}}]),n}(c.Component),y=n(18),g={type:"text",marginRight:"250px"},S={type:"number",marginRight:"20px"},N={type:"checkbox",marginRight:"10px"};function k(e,t,n,c){e["".concat(n)]=c.target.checked,t(e)}function w(e,t,n,c){0!==c.target.value.length?e["".concat(n)]=c.target.value:delete e["".concat(n)],t(e),console.log(e)}function C(e,t,n){e.setState(Object(y.a)({},"".concat(t),n.target.value))}function _(e,t,n,c){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{style:{marginRight:e.marginRight},id:n,htmlFor:t,children:n}),Object(x.jsx)("input",{type:"range"===e.type?"number":e.type,id:t,defaultValue:a,onChange:c})]})}function D(e,t){return Object(x.jsx)("label",{id:e,htmlFor:t,children:e})}function A(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new URLSearchParams;return e.map((function(e){var a=e.name,r=e.id,i=e.type,s=e.options,l=e.values;switch(i){case"text":return _(g,r,a,(function(e){w(t,n,r,e)}),c.get("".concat(r)));case"range":return U(r,t,n,a,c);case"checkbox":return Object(b.isUndefined)(t[r])&&(t[r]=!1),_(N,r,a,(function(e){return k(t,n,r,e)}));case"radio":return R(r,t,n,l,s,a,c);default:return null}}))}function I(e,t){return Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:t,children:e})}function U(e,t,n,c){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new URLSearchParams,r=e+"_min",i=e+"_max";return Object(x.jsx)("section",{class:"mb-lg-2",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mt-sm-1 pb-1",children:[Object(x.jsx)("div",{className:"md-form md-outline my-0",children:_(S,r,c+" min",(function(e){return w(t,n,r,e)}),a.get(r))}),Object(x.jsx)("div",{className:"md-form md-outline my-0",children:_(S,i,c+" max",(function(e){return w(t,n,i,e)}),a.get(i))})]})})}function R(e,t,n,c,a,r){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new URLSearchParams;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsxs)("ul",{children:[D(r,e),a.map((function(a,r){return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("input",{type:"radio",id:"".concat(e,"_").concat(a),name:e,defaultChecked:!Object(b.isUndefined)(i.get("".concat(e)))&&i.get("".concat(e))===c[r],value:c[r],onChange:function(c){return w(t,n,e,c)}}),Object(x.jsx)("label",{htmlFor:"".concat(e,"_").concat(a),children:a})]})}))]})})})}var E=function(){var e=Object(c.useState)(f),t=Object(j.a)(e,2),n=t[0],a=(t[1],Object(c.useState)({})),r=Object(j.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)({submitted:!1,data:null}),o=Object(j.a)(l,2),d=o[0],u=o[1];return Object(x.jsx)("div",{className:"submit-form",children:d.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{children:"Article was uploaded into the database!"}),Object(x.jsx)(v,{data:d.data}),Object(x.jsx)("button",{className:"btn btn-success",onClick:function(){u({submitted:!1,data:null}),s({})},children:"Continue"})]}):Object(x.jsxs)("form",{children:[A(n,i,s),I("Submit",(function(){O.create(i).then((function(e){console.log(e.data),u({submitted:!0,data:e.data})})).catch((function(e){console.log(e)}))}))]})})},q=n(40),L=n.n(q),P=n(67),T=n(9),B=[{id:"externalId",type:"text",name:"External Id",placeholder:"ID",sqlOp:"where",op:"eq"},{id:"rent",type:"range",name:"Rent",placeholder:"rent",sqlOp:["gte","lte"],op:"like"},{name:"Address",id:"address",type:"text",placeholder:"ID",sqlOp:"where",op:"like"},{name:"Postal Code",id:"postalCode",type:"text",placeholder:"ID",sqlOp:"where",op:"like"},{name:"City",id:"city",type:"text",placeholder:"ID",sqlOp:"where",op:"like"},{name:"Area (m2)",id:"areaSqm",type:"range",placeholder:"ID",sqlOp:"where",op:"eq"},{name:"Deposit",id:"deposit",type:"range",placeholder:"ID",sqlOp:"where",op:"eq"},{name:"Room active",id:"isRoomActive",type:"radio",options:["Any","Y","N"],values:["","true","false"],placeholder:"ID",sqlOp:"where",op:"eq"},{name:"Order:",id:"order",child:"order_by",type:"radio",options:["None","Ascending","Descending"],values:["","ASC","DESC"],placeholder:"ID",sqlOp:"order"},{name:"Order by:",parent:"order",id:"order_by",type:"radio",options:["Rent","Deposit","Area(m2)"],values:["rent","deposit","areaSqm"],placeholder:"orderBy",sqlOp:"order"},{name:"Limit ",id:"limit",type:"text",placeholder:"ID",sqlOp:"limit"}],F=new Map,W=[{id:"externalId"},{id:"rent"},{id:"areaSqm_min"},{id:"areaSqm_max"},{id:"deposit_min"},{id:"deposit_max"},{id:"isRoomActive"},{id:"limit"},{id:"order"},{id:"order_by"},{id:"isRoomActive"},{id:"areaSqm"},{id:"city"},{id:"address"},{id:"rent_min"},{id:"rent_max"},{id:"postalCode"}];B.forEach((function(e){F.set(e.id,e)}));var J=n(69),M=n(26),H={update:!1,searched:!1,queryUpdate:!1,singleUpdate:!1},K=function(e){var t=Object(c.useState)(H),n=Object(j.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),l=Object(j.a)(s,2),o=l[0],d=l[1],u=Object(c.useState)(null),p=Object(j.a)(u,2),h=p[0],m=p[1],g=Object(c.useState)(-1),S=Object(j.a)(g,2),N=S[0],k=S[1],w=Object(c.useState)(B),C=Object(j.a)(w,2),_=C[0],D=(C[1],Object(c.useState)({})),U=Object(j.a)(D,2),R=U[0],E=U[1],q=Object(c.useState)({}),K=Object(j.a)(q,2),G=K[0],V=K[1],Y=Object(c.useState)({}),$=Object(j.a)(Y,2),z=$[0],Q=$[1],X=Object(M.c)(),Z=Object(i.c)(),ee=Object(j.a)(Z,2),te=ee[0],ne=ee[1];function ce(){if(!1===a.searched){ie();var e=re();console.log(e),O.filterSearch(e).then((function(e){var t;t=204===e.status?null:e.data,d(t),console.log(e.data)})).catch((function(e){console.log(e)})),oe("searched",!0)}}function ae(){var e=new URLSearchParams;Object.entries(R).forEach((function(t){var n=Object(j.a)(t,2),c=n[0],a=n[1];e.append("".concat(c),"".concat(a))})),ne(R),X("/../nrp/articles/search?"+e,{replace:!0})}function re(){var e=Object(J.a)(R);return Object.entries(e).forEach((function(t){var n=Object(j.a)(t,2),c=n[0],a=(n[1],F.get(c));if(!Object(b.isUndefined)(a)&&!Object(b.isUndefined)(a.parent)){if(!Object(b.isUndefined)(e[a.parent])){var r=e[c],i=[];i.push(r),i.push(e[a.parent]),e[a.parent]=i}delete e[c]}})),e}function ie(){d([]),m(null),k(-1)}function se(e,t,n,c){return le.apply(this,arguments)}function le(){return(le=Object(P.a)(L.a.mark((function e(t,n,c,a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n).then((function(e){return 500===e.status?(window.alert(a),null):(window.alert(c),e)})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){r((function(n){return Object(T.a)(Object(T.a)({},n),{},Object(y.a)({},e,t))}))}return Object(c.useEffect)((function(){console.log("USED EFFECT"),W.forEach((function(e){var t=te.get("".concat(e.id));Object(b.isNull)(t)||Object(b.isUndefined)(R["".concat(e.id)])&&(R["".concat(e.id)]=t)})),E(R),ce()}),[]),Object(x.jsxs)("div",{className:"list row",children:[Object(x.jsxs)("div",{className:"col-md-8",children:[A(_,R,E,te),Object(x.jsxs)("div",{className:"input-group-append",children:[I("Search",(function(){d([]),r((function(e){return Object(T.a)(Object(T.a)({},e),{},{update:!1,searched:!1})})),ce(),ae()})),I("Update all",(function(){ie(),d([]),oe("update",!0)})),I("Delete all",(function(){var e=re();se(O.filterDelete,e,"Delete query sent! Filter properties used\n"+JSON.stringify(R,null,2),"500 Internal server error").then((function(){ie()}))})),a.update?Object(x.jsxs)("form",{className:"col-md-8",children:[A(f,G,V),I("Update",(function(){!function(){var e={conditions:re(),fields:G};se(O.filterUpdate,e,"Article patch sent! Filter properties used\n"+JSON.stringify(R,null,2),"500 Internal server error").then((function(e){Object(b.isUndefined)(e)||(window.alert("Server says:\nUpdated "+e.data+" rows! <3"),ie())}))}(),ae()}))]}):null]})]}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("h4",{children:"Article List"}),Object(x.jsx)("ul",{className:"list-group",children:o.length>0&&o.map((function(e,t){return Object(x.jsx)("li",{className:"list-group-item "+(t===N?"active":""),onClick:function(){return function(e,t){m(e),k(t)}(e,t)},children:e.address+", "+e.city},t)}))})]}),Object(x.jsx)("div",{className:"col-md-6",children:h&&o?Object(x.jsxs)("div",{className:"col-md-8",children:[Object(x.jsx)(v,{data:h}),Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){se(O.filterDelete,{externalId:h.externalId},"Delete query accepted rows! Filter properties used\n","0 entries deleted").then((function(){d([]),ie()}))},children:"Delete"}),Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){d([h]),oe("singleUpdate",!0)},children:"Update"}),Object(x.jsx)("div",{children:a.singleUpdate?Object(x.jsxs)("div",{children:[A(f,z,Q),I("PATCH",(function(){var e={conditions:{externalId:h.externalId},fields:z};se(O.filterUpdate,e,"Article patch sent! Filter properties used\n"+JSON.stringify(R,null,2),"500 Internal server error").then((function(e){Object(b.isNull)(e)||m((function(e){return Object(T.a)(Object(T.a)({},e),z)}))}))}))]}):null})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"No article selected"})]})})]})},G=[{name:"City",id:"city",type:"text"},{name:"Population N",id:"population",type:"checkbox",fun:"COUNT"},{name:"Mean rent",id:"mean_rent",type:"checkbox"},{name:"Mean deposit",id:"mean_deposit",type:"checkbox"},{name:"Median rent",id:"med_rent",type:"checkbox"},{name:"Median deposit",id:"med_deposit",type:"checkbox"},{name:"SD rent",id:"sd_rent",type:"checkbox",fun:"STD"},{name:"SD deposit",id:"sd_deposit",type:"checkbox"}],V=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(s.a)(this,n),(c=t.call(this,e)).refreshList=function(){c.setState({currentEntry:null,currentIndex:-1})},c.retrieveEntries=function(){c.refreshList();var e=c.state.city;O.getByParam("city",e).then((function(e){var t;t=204===e.status?null:e.data,c.setState({entries:t}),console.log(e.data)})).catch((function(e){console.log(e)}))},c.setSelection=function(e,t){c.setState({currentEntry:e,currentIndex:t})},c.state=Object(T.a)(Object(T.a)({},function(e,t){for(var n={submitted:!1},c=0;c<e.length;c++)n["".concat(e[c].id)]=t;return n}(G,"")),{},{submitted:!1,entries:[],city:"",currentEntry:null,currentIndex:-1}),c}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.entries,c=t.currentEntry,a=t.currentIndex;return Object(x.jsxs)("div",{className:"submit-form",children:[G.map((function(t){var n=t.name,c=t.id;return"text"===t.type?_(g,c,n,(function(t){return C(e,c,t)})):null})),Object(x.jsx)("button",{style:{marginTop:"25px"},className:"btn btn-outline-secondary",type:"button",onClick:this.retrieveEntries,children:"Search"}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("h4",{style:{paddingTop:"25px"},children:"Article List"}),Object(x.jsx)("ul",{className:"list-group",children:n&&n.map((function(t,n){return Object(x.jsx)("li",{className:"list-group-item "+(n===a?"active":""),onClick:function(){return e.setSelection(t,n)},children:n+". "+t.city},n)}))})]}),Object(x.jsx)("div",{className:"position-absolute top-75 start-75",children:c&&this.state.entries?Object(x.jsxs)("div",{children:[D("".concat(c.city)),Object(x.jsx)(i.b,{to:"/nrp/articles/stats/"+c.city,className:"badge badge-warning",children:Object(x.jsx)("button",{type:"button",children:"Get statistics"})})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Please select a city"})]})})]})}}]),n}(c.Component),Y=(n(101),function(){var e=Object(u.g)().city,t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({}),s=Object(j.a)(i,2),l=s[0],o=s[1],d=Object(c.useState)(function(e,t){for(var n={},c=0;c<e.length;c++)n["".concat(e[c].id)]=t;return n}(G,!1)),b=Object(j.a)(d,2),p=b[0],h=b[1];return Object(x.jsxs)("div",{className:"submit-form",children:[Object(x.jsx)("h4",{style:{paddingTop:"25px"},children:e}),Object(x.jsx)("div",{children:a?Object(x.jsx)(v,{data:l}):Object(x.jsxs)("div",{children:[G.map((function(e){var t=e.name,n=e.id;return"checkbox"===e.type?_(N,n,t,(function(e){return k(p,h,n,e)})):null})),Object(x.jsx)("button",{style:{marginTop:"25px"},className:"btn btn-outline-secondary",type:"button",onClick:function(){console.log(p),O.getStatistics(e,p).then((function(e){console.log(e.data),r(!0),o(e.data)}))},children:"Get statistics"})]})})]})}),$=Object(M.b)(window),z=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsx)(M.a,{history:$,children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(x.jsx)(i.b,{to:"nrp",className:"navbar-brand",children:"Netherlands Rental Properties"}),Object(x.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{to:"nrp/articles/search?limit=5",className:"nav-link",children:"Search"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{to:"nrp/articles/create",className:"nav-link",children:"Add"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{to:"nrp/articles/stats",className:"nav-link",children:"Statistics"})})]})]}),Object(x.jsx)("div",{className:"container mt-3",children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{exact:!0,path:"nrp",element:n}),Object(x.jsx)(u.a,{path:"nrp/articles/search/",element:Object(x.jsx)(K,{})}),Object(x.jsx)(u.a,{path:"nrp/articles/create",element:Object(x.jsx)(E,{})}),Object(x.jsx)(u.a,{path:"nrp/articles/stats/:city",element:Object(x.jsx)(Y,{})}),Object(x.jsx)(u.a,{path:"nrp/articles/stats",element:Object(x.jsx)(V,{})})]})})]})})}}]),n}(c.Component),Q=z;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(x.jsx)(i.a,{children:Object(x.jsx)(Q,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,n){}},[[194,1,2]]]);
//# sourceMappingURL=main.a1325890.chunk.js.map