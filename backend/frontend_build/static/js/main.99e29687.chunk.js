(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{194:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(65),r=n.n(a),i=n(7),s=n(2),l=(n(74),n(75),n(3)),o=n(16),d=n(17),u=n(4),j=n.n(u),b=n(66),p=n.n(b).a.create({baseURL:"http://localhost:6868/nrp/",headers:{"Access-Control-Allow-Origin":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_BASE_URL}}),h=new(function(){function e(){Object(o.a)(this,e)}return Object(d.a)(e,[{key:"getById",value:function(e){return p.get("articles/id/".concat(e))}},{key:"getByParam",value:function(e,t){return p.get("articles/".concat(e),{params:{value:t}})}},{key:"filterSearch",value:function(e,t){return p.get("articles/search/filter",{params:e,headers:t})}},{key:"filterDelete",value:function(e,t){return console.log(e),p.delete("articles/search/filter",{params:e,headers:t})}},{key:"filterUpdate",value:function(e,t){return p.patch("articles/search/filter",e.fields,{params:e.conditions,headers:t})}},{key:"create",value:function(e){return p.post("articles/new",e)}},{key:"updateById",value:function(e,t){return p.put("articles/id/".concat(e),t)}},{key:"deleteById",value:function(e){return p.delete("articles/id/".concat(e))}},{key:"deleteByLocation",value:function(e,t){return p.delete("articles/location",{params:{lat:"".concat(e),long:"".concat(t)}})}},{key:"deleteAll",value:function(){return p.delete("articles")}},{key:"findByParameter",value:function(e){return p.get("articles/top-list/",{params:j.a.pick(e,(function(e,t){return!!e}))})}},{key:"findByRent",value:function(e,t,n){return p.get("articles/search-budget",{params:{min:"".concat(e),max:"".concat(t),format:"".concat(n)}})}},{key:"findByLocation",value:function(e,t,n){return p.get("articles/location?",{params:{lat:"".concat(e),long:"".concat(t),format:"".concat(n)}})}},{key:"getStatistics",value:function(e,t){return p.get("articles/statistics/".concat(e),{params:t})}}]),e}()),m=[{name:"Address",id:"title",type:"text"},{name:"Postal Code",id:"postalCode",type:"text"},{name:"City",id:"city",type:"text"},{name:"Area (m2)",id:"areaSqm",type:"text"},{name:"Rent",id:"rent",type:"text"},{name:"Deposit",id:"deposit",type:"text"},{name:"Latitude",id:"latitude",type:"text"},{name:"Longitude",id:"longitude",type:"text"},{name:"Room active",id:"isRoomActive",type:"checkbox",options:["Yes","No"],values:[!0,!1]}],O=n(32),f=n(31),x=n(1),v=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).generateLabel=function(e,t,n,c){return Object(x.jsx)("div",{className:e,children:Object(x.jsx)("label",{style:{color:n,fontWeight:c},htmlFor:t,children:"".concat(t)})})},c.generateDisplay=function(){return Object(x.jsx)("div",{className:"display-entry",children:Object(x.jsx)("ul",{children:Object.entries(c.props.data).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return Object(x.jsxs)("li",{children:[c.generateLabel("field",n+" :","blue","bold"),c.generateLabel("value",a,"green","normal")]},n)}))})})},c}return Object(d.a)(n,[{key:"render",value:function(){return this.generateDisplay()}}]),n}(c.Component),y=n(18),g={type:"text",marginRight:"250px"},S={type:"number",marginRight:"20px"},N={type:"checkbox",marginRight:"10px"};function k(e,t,n,c){e["".concat(n)]=c.target.checked,t(e)}function w(e,t,n,c){0!==c.target.value.length?e["".concat(n)]=c.target.value:delete e["".concat(n)],t(e),console.log(e)}function C(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=e.name,r=e.id,i=e.placeholder;return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{style:{marginRight:t.marginRight},id:r+a,children:a}),Object(x.jsx)("input",{type:"range"===t.type?"number":t.type,id:r,placeholder:i,defaultValue:c,onChange:n})]})}function _(e,t){return Object(x.jsx)("label",{id:e,children:e})}function A(e,t,n){var c=e.id,a=e.options,r=e.values,i=e.name;return Object(x.jsxs)("div",{children:[_(i),Object(x.jsx)("select",{onChange:function(e){return w(t,n,c,e)},children:a.map((function(e,t){return Object(x.jsx)("option",{value:r[t],children:e})}))})," ;"]})}function D(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new URLSearchParams;return e.map((function(e){var a=e.id;switch(e.type){case"text":return C(e,g,(function(e){w(t,n,a,e)}),c.get("".concat(a)));case"range":return I(e,t,n,c);case"checkbox":return Object(u.isUndefined)(t[a])&&(t[a]=!1),C(e,N,(function(e){return k(t,n,a,e)}));case"radio":return U(e,t,n,c);case"select":return A(e,t,n);default:return null}}))}function R(e,t){return Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:t,children:e})}function I(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new URLSearchParams,a=e.id,r=(e.label,a+"_min"),i=a+"_max";return Object(x.jsx)("section",{class:"mb-lg-2",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mt-sm-1 pb-1",children:[Object(x.jsx)("div",{className:"md-form md-outline my-0",children:C(e,S,(function(e){return w(t,n,r,e)}),c.get(r))}),Object(x.jsx)("div",{className:"md-form md-outline my-0",children:C(e,S,(function(e){return w(t,n,i,e)}),c.get(i))})]})})}function U(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new URLSearchParams,a=e.id,r=e.options,i=e.values,s=e.label;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsxs)("ul",{children:[_(s),r.map((function(e,r){return Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("input",{type:"radio",id:"".concat(a,"_").concat(e),name:a,defaultChecked:!Object(u.isUndefined)(c.get("".concat(a)))&&c.get("".concat(a))===i[r],value:i[r],onChange:function(e){return w(t,n,a,e)}}),Object(x.jsx)("label",{htmlFor:"".concat(a,"_").concat(e),children:e})]})}))]})})})}var q=function(){var e=Object(c.useState)(m),t=Object(l.a)(e,2),n=t[0],a=(t[1],Object(c.useState)({})),r=Object(l.a)(a,2),i=r[0],s=r[1],o=Object(c.useState)({submitted:!1,data:null}),d=Object(l.a)(o,2),u=d[0],j=d[1];return Object(x.jsx)("div",{className:"submit-form",children:u.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h5",{children:"Article was uploaded into the database!"}),Object(x.jsx)(v,{data:u.data}),Object(x.jsx)("button",{className:"btn btn-success",onClick:function(){j({submitted:!1,data:null}),s({})},children:"Continue"})]}):Object(x.jsxs)("form",{children:[D(n,i,s),R("Submit",(function(){h.create(i).then((function(e){console.log(e.data),j({submitted:!0,data:e.data})})).catch((function(e){console.log(e)}))}))]})})},E=n(40),L=n.n(E),P=n(67),B=n(9),T=[{id:"externalId",type:"text",name:"External Id",placeholder:"ID",sqlOp:"where",op:"eq"},{id:"rent",type:"range",name:"Rent",placeholder:"rent",sqlOp:["gte","lte"],op:"like"},{name:"Address",id:"title",type:"text",placeholder:"ID",sqlOp:"where",op:"like"},{name:"Postal Code",id:"postalCode",type:"text",placeholder:"ID",sqlOp:"where",op:"like"},{name:"City",id:"city",type:"text",placeholder:"ID",sqlOp:"where",op:"like"},{name:"Area (m2)",id:"areaSqm",type:"range",placeholder:"ID",sqlOp:"where",op:"eq"},{name:"Deposit",id:"deposit",type:"range",placeholder:"ID",sqlOp:"where",op:"eq"},{name:"Room active",id:"isRoomActive",type:"radio",options:["Any","Y","N"],values:["","true","false"],placeholder:"ID",sqlOp:"where",op:"eq"},{name:"Order:",id:"order",child:"order_by",type:"radio",options:["None","Ascending","Descending"],values:["","ASC","DESC"],placeholder:"ID",sqlOp:"order"},{name:"Order by:",parent:"order",id:"order_by",type:"radio",options:["Rent","Deposit","Area(m2)"],values:["rent","deposit","areaSqm"],placeholder:"orderBy",sqlOp:"order"},{name:"Limit ",id:"limit",type:"text",placeholder:"ID",sqlOp:"limit"}],F=new Map,J=[{id:"externalId"},{id:"rent"},{id:"areaSqm_min"},{id:"areaSqm_max"},{id:"deposit_min"},{id:"deposit_max"},{id:"isRoomActive"},{id:"limit"},{id:"order"},{id:"order_by"},{id:"isRoomActive"},{id:"areaSqm"},{id:"city"},{id:"title"},{id:"rent_min"},{id:"rent_max"},{id:"postalCode"}];T.forEach((function(e){F.set(e.id,e)}));var W=n(69),M=n(24),H=[{id:"Accept",type:"select",name:"Response format",options:["JSON","CSV"],values:["application/json","text/csv"]}],K={Accept:"application/json"},V={update:!1,response:{},searched:!1,queryUpdate:!1,singleUpdate:!1,customFormat:!0,download:null},G=function(e){var t=Object(c.useState)(V),n=Object(l.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)([]),o=Object(l.a)(s,2),d=o[0],j=o[1],b=Object(c.useState)(null),p=Object(l.a)(b,2),O=p[0],f=p[1],g=Object(c.useState)(-1),S=Object(l.a)(g,2),N=S[0],k=S[1],w=Object(c.useState)(T),C=Object(l.a)(w,2),_=C[0],A=(C[1],Object(c.useState)({})),I=Object(l.a)(A,2),U=I[0],q=I[1],E=Object(c.useState)({}),G=Object(l.a)(E,2),Y=G[0],$=G[1],z=Object(c.useState)(K),Q=Object(l.a)(z,2),X=Q[0],Z=Q[1],ee=Object(M.c)(),te=Object(c.useState)({}),ne=Object(l.a)(te,2),ce=ne[0],ae=ne[1],re=Object(i.c)(),ie=Object(l.a)(re,2),se=ie[0],le=ie[1];function oe(){be(h.filterSearch,ue(),"Searching completed","Server error occurred").then((function(e){Object(u.isNull)(e)||function(e){e.headers["content-type"].includes("application/json")&&j(e.data);he(e)}(e)}))}function de(){var e=new URLSearchParams;Object.entries(ce).forEach((function(t){var n=Object(l.a)(t,2),c=n[0],a=n[1];e.append("".concat(c),"".concat(a))})),le(ce),ee("/../nrp/articles/search?"+e,{replace:!0})}function ue(){var e=Object(W.a)(ce);return Object.entries(e).forEach((function(t){var n=Object(l.a)(t,2),c=n[0],a=(n[1],F.get(c));if(!Object(u.isUndefined)(a)&&!Object(u.isUndefined)(a.parent)){if(!Object(u.isUndefined)(e[a.parent])){var r=e[c],i=[];i.push(r),i.push(e[a.parent]),e[a.parent]=i}delete e[c]}})),e}function je(){j([]),f(null),k(-1)}function be(e,t,n,c){return pe.apply(this,arguments)}function pe(){return(pe=Object(P.a)(L.a.mark((function e(t,n,c,a){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(n,X).then((function(e){return 500===e.status?(window.alert(a),me("response",{}),null):(window.alert(c),he(e),e)})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var t;me("response",e.data),t=e.headers["content-type"].includes("application/json")?JSON.stringify(e.data):e.data.toString(),me("download",URL.createObjectURL(new Blob([t],{type:X.Accept})))}function me(e,t){r((function(n){return Object(B.a)(Object(B.a)({},n),{},Object(y.a)({},e,t))}))}return Object(c.useEffect)((function(){J.forEach((function(e){var t=se.get("".concat(e.id));Object(u.isNull)(t)||Object(u.isUndefined)(ce["".concat(e.id)])&&(ce["".concat(e.id)]=t)})),ae(ce),oe()}),[]),Object(x.jsxs)("div",{className:"list row",children:[Object(x.jsxs)("div",{className:"col-md-8",children:[D(H,X,Z),D(_,ce,ae,se),Object(x.jsxs)("div",{className:"input-group-append",children:[R("Search",(function(){j([]),r((function(e){return Object(B.a)(Object(B.a)({},e),{},{update:!1,searched:!1})})),oe(),de()})),R("Update all",(function(){je(),j([]),me("update",!0)})),R("Delete all",(function(){var e=ue();be(h.filterDelete,e,"Delete query sent! Filter properties used\n"+JSON.stringify(ce,null,2),"500 Internal server error").then((function(){je()}))})),Object(x.jsx)("a",{href:a.download,download:!0,children:"Click to download"}),a.update?Object(x.jsxs)("form",{className:"col-md-8",children:[D(m,U,q),R("Update",(function(){!function(){var e={conditions:ue(),fields:U};be(h.filterUpdate,e,"Article patch sent! Filter properties used\n"+JSON.stringify(ce,null,2),"500 Internal server error").then((function(e){Object(u.isUndefined)(e)||(window.alert("Server says:\nUpdated "+e.data+" rows! <3"),je())}))}(),de()}))]}):null]})]}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("h4",{children:"Article List"}),Object(x.jsx)("ul",{className:"list-group",children:d.length>0&&d.map((function(e,t){return Object(x.jsx)("li",{className:"list-group-item "+(t===N?"active":""),onClick:function(){return function(e,t){f(e),k(t)}(e,t)},children:e.title+", "+e.city},t)}))})]}),Object(x.jsx)("div",{className:"col-md-6",children:O&&d?Object(x.jsxs)("div",{className:"col-md-8",children:[Object(x.jsx)(v,{data:O}),Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){be(h.filterDelete,{externalId:O.externalId},"Delete query accepted rows! Filter properties used\n","0 entries deleted").then((function(){j([]),je()}))},children:"Delete"}),Object(x.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:function(){j([O]),me("singleUpdate",!0)},children:"Update"}),Object(x.jsx)("div",{children:a.singleUpdate?Object(x.jsxs)("div",{children:[D(m,Y,$),R("PATCH",(function(){var e={conditions:{externalId:O.externalId},fields:Y};be(h.filterUpdate,e,"Article patch sent! Filter properties used\n"+JSON.stringify(ce,null,2),"500 Internal server error").then((function(e){Object(u.isNull)(e)||f((function(e){return Object(B.a)(Object(B.a)({},e),Y)}))}))}))]}):null})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"No article selected"})]})})]})},Y=[{name:"City",id:"city",type:"text"},{name:"Population N",id:"population",type:"checkbox",fun:"COUNT"},{name:"Mean rent",id:"mean_rent",type:"checkbox"},{name:"Mean deposit",id:"mean_deposit",type:"checkbox"},{name:"Median rent",id:"med_rent",type:"checkbox"},{name:"Median deposit",id:"med_deposit",type:"checkbox"},{name:"SD rent",id:"sd_rent",type:"checkbox",fun:"STD"},{name:"SD deposit",id:"sd_deposit",type:"checkbox"}],$=function(e){Object(O.a)(n,e);var t=Object(f.a)(n);function n(e){var c;return Object(o.a)(this,n),(c=t.call(this,e)).refreshList=function(){c.setState({currentEntry:null,currentIndex:-1})},c.retrieveEntries=function(){c.refreshList();var e=c.state.city;h.getByParam("city",e).then((function(e){var t;t=204===e.status?null:e.data,c.setState({entries:t}),console.log(e.data)})).catch((function(e){console.log(e)}))},c.setSelection=function(e,t){c.setState({currentEntry:e,currentIndex:t})},c.state=Object(B.a)(Object(B.a)({},function(e,t){for(var n={submitted:!1},c=0;c<e.length;c++)n["".concat(e[c].id)]=t;return n}(Y,"")),{},{submitted:!1,entries:[],city:"",currentEntry:null,currentIndex:-1}),c}return Object(d.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.entries,c=t.currentEntry,a=t.currentIndex;return Object(x.jsxs)("div",{className:"submit-form",children:[Y.map((function(t){var n=t.id;return"text"===t.type?C(t,g,(function(t){return function(e,t,n){e.setState(Object(y.a)({},"".concat(t),n.target.value))}(e,n,t)})):null})),Object(x.jsx)("button",{style:{marginTop:"25px"},className:"btn btn-outline-secondary",type:"button",onClick:this.retrieveEntries,children:"Search"}),Object(x.jsxs)("div",{className:"col-md-6",children:[Object(x.jsx)("h4",{style:{paddingTop:"25px"},children:"Article List"}),Object(x.jsx)("ul",{className:"list-group",children:n&&n.map((function(t,n){return Object(x.jsx)("li",{className:"list-group-item "+(n===a?"active":""),onClick:function(){return e.setSelection(t,n)},children:n+". "+t.city},n)}))})]}),Object(x.jsx)("div",{className:"position-absolute top-75 start-75",children:c&&this.state.entries?Object(x.jsxs)("div",{children:[_("".concat(c.city)),Object(x.jsx)(i.b,{to:"/nrp/articles/stats/"+c.city,className:"badge badge-warning",children:Object(x.jsx)("button",{type:"button",children:"Get statistics"})})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Please select a city"})]})})]})}}]),n}(c.Component),z=(n(101),function(){var e=Object(s.g)().city,t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)({}),o=Object(l.a)(i,2),d=o[0],u=o[1],j=Object(c.useState)(function(e,t){for(var n={},c=0;c<e.length;c++)n["".concat(e[c].id)]=t;return n}(Y,!1)),b=Object(l.a)(j,2),p=b[0],m=b[1];return Object(x.jsxs)("div",{className:"submit-form",children:[Object(x.jsx)("h4",{style:{paddingTop:"25px"},children:e}),Object(x.jsx)("div",{children:a?Object(x.jsx)(v,{data:d}):Object(x.jsxs)("div",{children:[Y.map((function(e){var t=e.id;return"checkbox"===e.type?C(e,N,(function(e){return k(p,m,t,e)})):null})),Object(x.jsx)("button",{style:{marginTop:"25px"},className:"btn btn-outline-secondary",type:"button",onClick:function(){console.log(p),h.getStatistics(e,p).then((function(e){console.log(e.data),r(!0),u(e.data)}))},children:"Get statistics"})]})})]})}),Q=Object(M.b)(window),X=function e(){return Object(x.jsx)(M.a,{history:Q,children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:[Object(x.jsx)(i.b,{to:"nrp",className:"navbar-brand",children:"Netherlands Rental Properties"}),Object(x.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{to:"nrp/articles/search?limit=5",className:"nav-link",children:"Search"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{to:"nrp/articles/create",className:"nav-link",children:"Add"})}),Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(i.b,{to:"nrp/articles/stats",className:"nav-link",children:"Statistics"})})]})]}),Object(x.jsx)("div",{className:"container mt-3",children:Object(x.jsxs)(s.c,{children:[Object(x.jsx)(s.a,{exact:!0,path:"nrp",element:e}),Object(x.jsx)(s.a,{path:"nrp/articles/stats/raw/:file",element:Object(x.jsx)($,{})}),Object(x.jsx)(s.a,{path:"nrp/articles/search/",element:Object(x.jsx)(G,{})}),Object(x.jsx)(s.a,{path:"nrp/articles/create",element:Object(x.jsx)(q,{})}),Object(x.jsx)(s.a,{path:"nrp/articles/stats/:city",element:Object(x.jsx)(z,{})}),Object(x.jsx)(s.a,{path:"nrp/articles/stats",element:Object(x.jsx)($,{})})]})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(x.jsx)(i.a,{children:Object(x.jsx)(X,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},75:function(e,t,n){}},[[194,1,2]]]);
//# sourceMappingURL=main.99e29687.chunk.js.map